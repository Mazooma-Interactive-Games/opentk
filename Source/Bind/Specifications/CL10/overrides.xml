<?xml version="1.0" encoding="utf-8" ?>
<signatures>
  <delete name="cl">
    <!-- Remove broken signatures -->
    <function name="BuildProgram" />
    <function name="CompileProgram" />
    <function name="CreateBuffer" />
    <function name="CreateCommandQueue" />
    <function name="CreateContext" />
    <function name="CreateContextFromType" />
    <function name="CreateSampler" />
    <function name="EnqueueNativeKernel" />
    <function name="EnqueueSVMFree" />
    <function name="GetContextInfo" />
    <function name="GetDeviceInfo" />
    <function name="GetPlatformIDs" />
    <function name="LinkProgram" />
    <function name="SetEventCallback" />
    <function name="SetMemObjectDestructorCallback" />
  </delete>

  <add name="cl">
    <enum name="CommandQueueFlags">
      <token name="DEFAULT" value="0" />
    </enum>
    <enum name="SamplerProperties" version="2.0">
      <use token="SAMPLER_NORMALIZED_COORDS" comment="&lt;see cref='System.Boolean'&gt;; default true" />
      <use token="SAMPLER_ADDRESSING_MODE" comment="&lt;see cref='AddressingMode'&gt;; default Clamp" />
      <use token="SAMPLER_FILTER_MODE" comment="&lt;see cref='FilterMode'&gt;; default LinearNearest" />
      <use token="SAMPLER_MIP_FILTER_MODE" comment="Requires CL_KHR_mipmap_image. &lt;see cref='FilterMode'&gt;; default None" />
      <use token="SAMPLER_LOD_MIN" comment="Requires CL_KHR_mipmap_image. &lt;see cref='System.Single'&gt;; default 0.0" />
      <use token="SAMPLER_LOD_MAX" comment="Requires CL_KHR_mipmap_image. &lt;see cref='System.Single'&gt;; default 0.0" />
    </enum>
    <!-- Add corrected signatures -->
    <function name="BuildProgram" version="1.0">
      <param type="cl_program" name="program" flow="in" />
      <param type="cl_uint" name="num_devices" flow="in" />
      <param type="cl_device_id *" name="device_list" flow="in" />
      <param type="char*" name="options" flow="in" />
      <param type="ProgramNotifyDelegate" name="notify" flow="in" />
      <param type="IntPtr" name="user_data" flow="in" />
      <returns type="ErrorCodes" />
    </function>
    <function name="CompileProgram" version="1.0">
      <param type="cl_program" name="program" flow="in" />
      <param type="cl_uint" name="num_devices" flow="in" />
      <param type="cl_device_id*" name="device_list" flow="in" />
      <param type="char*" name="options" flow="in" />
      <param type="cl_uint" name="num_input_headers" flow="in" />
      <param type="cl_program*" name="input_headers" flow="in" />
      <param type="char**" name="header_include_names" flow="in" />
      <param type="ProgramNotifyDelegate" name="notify" flow="in" />
      <param type="IntPtr" name="user_data" flow="in" />
      <returns type="ErrorCodes" />
    </function>
    <function name="CreateBuffer" version="1.0">
      <returns type="cl_mem" />
      <param type="cl_context" name="context" flow="in" />
      <param type="cl_mem_flags" name="flags" flow="in" />
      <param type="size_t" name="size" flow="in" />
      <param type="void*" name="host_ptr" flow="in" />
      <param type="cl_int*" name="errcode_ret" flow="out" />
    </function>
    <function name="CreateCommandQueue" version="1.0">
      <returns type="cl_command_queue" />
      <param type="cl_context" name="context" flow="in" />
      <param type="cl_device_id" name="device" flow="in" />
      <param type="cl_command_queue_properties" name="properties" flow="in" />
      <param type="cl_int*" name="errcode_ret" flow="out" />
    </function>
    <function name="CreateContext" version="1.0">
      <param type="cl_context_properties*" name="properties" flow="in" />
      <param type="cl_uint" name="num_devices" flow="in" />
      <param type="cl_device_id*" name="devices" flow="in" />
      <param type="IntPtr" name="pfn_notify" flow="in" />
      <param type="intptr_t" name="user_data" flow="in" />
      <param type="cl_int*" name="errcode_ret" flow="out" count="1" />
      <returns type="cl_context" />
    </function>
    <function name="CreateContextFromType" version="1.0">
      <param type="cl_context_properties*" name="properties" flow="in" />
      <param type="cl_device_type" name="device_type" flow="in" />
      <param type="ContextNotifyDelegate" name="notify" flow="in" />
      <param type="intptr_t" name="user_data" flow="in" />
      <param type="cl_int*" name="errcode_ret" flow="out" count="1" />
      <returns type="cl_context" />
    </function>
    <function name="CreateSampler" version="1.0">
      <param type="cl_context" name="context" flow="in" />
      <param type="cl_bool" name="normalized_coords" flow="in" />
      <param type="cl_addressing_mode" name="addressing_mode" flow="in" />
      <param type="cl_filter_mode" name="filter_mode" flow="in" />
      <param type="cl_int*" name="errcode_ret" flow="out" count="1" />
      <returns type="cl_sampler" />
    </function>
    <function name="EnqueueNativeKernel" version="1.0">
      <param type="cl_command_queue" name="command_queue" flow="in" />
      <param type="UserNotifyDelegate" name="notify" flow="in" />
      <param type="IntPtr" name="args" flow="in" />
      <param type="size_t" name="cb_args" flow="in" />
      <param type="cl_uint" name="num_mem_objects" flow="in" />
      <param type="cl_mem*" name="mem_list" flow="in" />
      <param type="void**" name="args_mem_loc" flow="in" />
      <param type="cl_uint" name="num_events_in_wait_list" flow="in" />
      <param type="cl_event*" name="event_wait_list" flow="in" />
      <param type="cl_event*" name="event" flow="out" />
      <returns type="ErrorCodes" />
    </function>
    <function name="GetContextInfo" version="1.0">
      <returns type="ErrorCodes" />
      <param type="cl_context" name="context" flow="in" />
      <param type="cl_context_info" name="param_name" flow="in" />
      <param type="size_t" name="param_value_size" flow="in" />
      <param type="void*" name="param_value" flow="in" />
      <param type="size_t*" name="param_value_size_ret" flow="out" count="1"/>
    </function>
    <function name="GetDeviceInfo" version="1.0">
      <returns type="cl_int" />
      <param type="cl_device_id" name="device" flow="in" />
      <param type="cl_device_info" name="param_name" flow="in" />
      <param type="size_t" name="param_value_size" flow="in" />
      <param type="void*" name="param_value" flow="in" />
      <param type="size_t*" name="param_value_size_ret" flow="out" count="1" />
    </function>
    <function name="GetPlatformIDs" version="1.0">
      <returns type="cl_int" />
      <param type="cl_uint" name="num_entries" flow="in" />
      <param type="cl_platform_id*" name="platforms" flow="out" />
      <param type="cl_uint*" name="num_platforms" flow="out" count="1" />
    </function>
    <function name="LinkProgram" version="1.2">
      <param type="cl_context" name="context" flow="in" />
      <param type="cl_uint" name="num_devices" flow="in" />
      <param type="cl_device_id*" name="device_list" flow="in" />
      <param type="char*" name="options" flow="in" />
      <param type="cl_uint" name="num_input_programs" flow="in" />
      <param type="cl_program*" name="input_programs" flow="in" />
      <param type="ProgramNotifyDelegate" name="notify" flow="in" />
      <param type="IntPtr" name="user_data" flow="in" />
      <returns type="ErrorCodes" />
    </function>
    <function name="SetEventCallback" version="1.2">
      <param type="cl_event" name="event" flow="in" />
      <param type="cl_int" name="command_exec_callback_type" flow="in" />
      <param type="EventNotifyDelegate" name="notify" flow="in" />
      <param type="IntPtr" name="user_data" flow="in" />
      <returns type="ErrorCodes" />
    </function>
    <function name="SetMemObjectDestructorCallback" version="1.2">
      <param type="cl_mem" name="memobj" flow="in" />
      <param type="MemObjectNotifyDelegate" name="pfn_notify" flow="in" />
      <param type="void*" name="user_data" flow="in" />
      <returns type="ErrorCodes" />
    </function>
    <function name="EnqueueSVMFree" version="2.0">
      <param type="cl_command_queue" name="command_queue" flow="in" />
      <param type="cl_uint" name="num_svm_pointers" flow="in" />
      <param type="void**" name="svm_pointers" flow="in" />
      <param type="SvmFreeDelegate" name="free" flow="in" />
      <param type="IntPtr" name="user_data" flow="in" />
      <param type="cl_uint" name="num_events_in_wait_list" flow="in" />
      <param type="cl_event*" name="event_wait_list" flow="in" />
      <param type="cl_event*" name="event" flow="out" />
      <returns type="ErrorCodes" />
    </function>
  </add>

  <replace name="cl">

    <enum name="ErrorCodes"><name>ErrorCode</name></enum>
    <enum name="DeviceTypeFlags">
      <type>long</type>
    </enum>
    <enum name="CommandQueuePropertiesFlags">
      <name>CommandQueueFlags</name>
      <type>long</type>
    </enum>
    <enum name="CommandQueueProperties"><name>CommandQueueFlags</name></enum>
    <!-- Rename ContextProperties enum to avoid conflict with ContextProperties struct -->
    <enum name="ContextProperties"><name>ComputeContextProperties</name></enum>

    <!-- ErrorCode returns -->
    <function name="GetPlatformIDs"><returns>ErrorCodes</returns></function>
    <function name="GetPlatformInfo"><returns>ErrorCodes</returns></function>
    <function name="GetDeviceIDs">
      <param name="num_devices"><count>1</count><flow>out</flow></param>
      <returns>ErrorCodes</returns>
    </function>
    <function name="GetDeviceInfo">
      <param name="param_value_size_ret"><count>1</count><flow>out</flow></param>
      <returns>ErrorCodes</returns>
    </function>
    <function name="CreateSubDevices"><returns>ErrorCodes</returns></function>
    <function name="RetainDevice"><returns>ErrorCodes</returns></function>
    <function name="ReleaseDevice"><returns>ErrorCodes</returns></function>
    <function name="RetainContext"><returns>ErrorCodes</returns></function>
    <function name="ReleaseContext"><returns>ErrorCodes</returns></function>
    <function name="GetContextInfo"><returns>ErrorCodes</returns></function>
    <function name="RetainCommandQueue"><returns>ErrorCodes</returns></function>
    <function name="ReleaseCommandQueue"><returns>ErrorCodes</returns></function>
    <function name="GetCommandQueueInfo"><returns>ErrorCodes</returns></function>
    <function name="RetainMemObject"><returns>ErrorCodes</returns></function>
    <function name="ReleaseMemObject"><returns>ErrorCodes</returns></function>
    <function name="GetSupportedImageFormats"><returns>ErrorCodes</returns></function>
    <function name="GetMemObjectInfo"><returns>ErrorCodes</returns></function>
    <function name="GetImageInfo"><returns>ErrorCodes</returns></function>
    <function name="GetPipeInfo"><returns>ErrorCodes</returns></function>
    <function name="RetainSampler"><returns>ErrorCodes</returns></function>
    <function name="ReleaseSampler"><returns>ErrorCodes</returns></function>
    <function name="GetSamplerInfo"><returns>ErrorCodes</returns></function>
    <function name="RetainProgram"><returns>ErrorCodes</returns></function>
    <function name="ReleaseProgram"><returns>ErrorCodes</returns></function>
    <function name="BuildProgram"><returns>ErrorCodes</returns></function>
    <function name="CompileProgram"><returns>ErrorCodes</returns></function>
    <function name="UnloadPlatformCompiler"><returns>ErrorCodes</returns></function>
    <function name="GetProgramInfo"><returns>ErrorCodes</returns></function>
    <function name="GetProgramBuildInfo"><returns>ErrorCodes</returns></function>
    <function name="CreateKernelsInProgram"><returns>ErrorCodes</returns></function>
    <function name="RetainKernel"><returns>ErrorCodes</returns></function>
    <function name="ReleaseKernel"><returns>ErrorCodes</returns></function>
    <function name="SetKernelArg"><returns>ErrorCodes</returns></function>
    <function name="SetKernelsArgSVMPointer"><returns>ErrorCodes</returns></function>
    <function name="SetKernelExecInfo"><returns>ErrorCodes</returns></function>
    <function name="GetKernelInfo"><returns>ErrorCodes</returns></function>
    <function name="GetKernelArgInfo"><returns>ErrorCodes</returns></function>
    <function name="GetKernelWorkGroupInfo"><returns>ErrorCodes</returns></function>
    <function name="WaitForEvents"><returns>ErrorCodes</returns></function>
    <function name="GetEventInfo"><returns>ErrorCodes</returns></function>
    <function name="ReleaseEvent"><returns>ErrorCodes</returns></function>
    <function name="SetUserEventStatus"><returns>ErrorCodes</returns></function>
    <function name="SetEventCallback"><returns>ErrorCodes</returns></function>
    <function name="GetEventProfilingInfo"><returns>ErrorCodes</returns></function>
    <function name="Flush"><returns>ErrorCodes</returns></function>
    <function name="Finish"><returns>ErrorCodes</returns></function>
    <function name="EnqueueReadBuffer"><returns>ErrorCodes</returns></function>
    <function name="EnqueueReadBufferRect"><returns>ErrorCodes</returns></function>
    <function name="EnqueueWriteBuffer"><returns>ErrorCodes</returns></function>
    <function name="EnqueueWriteBufferRect"><returns>ErrorCodes</returns></function>
    <function name="EnqueueFillBuffer"><returns>ErrorCodes</returns></function>
    <function name="EnqueueCopyBuffer"><returns>ErrorCodes</returns></function>
    <function name="EnqueueCopyBufferRect"><returns>ErrorCodes</returns></function>
    <function name="EnqueueReadImage"><returns>ErrorCodes</returns></function>
    <function name="EnqueueWriteImage"><returns>ErrorCodes</returns></function>
    <function name="EnqueueFillImage"><returns>ErrorCodes</returns></function>
    <function name="EnqueueCopyImage"><returns>ErrorCodes</returns></function>
    <function name="EnqueueCopyImageToBuffer"><returns>ErrorCodes</returns></function>
    <function name="EnqueueCopyBufferToImage"><returns>ErrorCodes</returns></function>
    <function name="EnqueueUnmapMemObject"><returns>ErrorCodes</returns></function>
    <function name="EnqueueMigrateMemObjects"><returns>ErrorCodes</returns></function>
    <function name="EnqueueNDRangeKernel"><returns>ErrorCodes</returns></function>
    <function name="EnqueueNativeKernel"><returns>ErrorCodes</returns></function>
    <function name="EnqueueMarkerWithWaitList"><returns>ErrorCodes</returns></function>
    <function name="EnqueueBarrierWithWaitList"><returns>ErrorCodes</returns></function>
    <function name="EnqueueSVMFree"><returns>ErrorCodes</returns></function>
    <function name="EnqueueSVMMemcpy"><returns>ErrorCodes</returns></function>
    <function name="EnqueueSVMMemFill"><returns>ErrorCodes</returns></function>
    <function name="EnqueueSVMMap"><returns>ErrorCodes</returns></function>
    <function name="EnqueueSVMUnmap"><returns>ErrorCodes</returns></function>

    <!-- ErrorCode parameters -->
    <function name="CreateContextFromType" extension="Core">
      <param name="errcode_ret">
        <type>ErrorCodes</type>
        <count>1</count>
      </param>
    </function>
    <function name="CreateBuffer" extension="Core">
      <param name="errcode_ret">
        <type>ErrorCodes</type>
        <count>1</count>
      </param>
    </function>
    <function name="CreateContext" extension="Core">
      <param name="errcode_ret">
        <type>ErrorCodes</type>
        <count>1</count>
      </param>
    </function>
    <function name="CreateContextFromType" extension="Core">
      <param name="errcode_ret">
        <type>ErrorCodes</type>
        <count>1</count>
      </param>
    </function>
    <function name="CreateCommandQueue" extension="Core">
      <param name="errcode_ret">
        <type>ErrorCodes</type>
        <count>1</count>
      </param>
    </function>
    <function name="CreateKernel" extension="Core">
      <param name="errcode_ret">
        <type>ErrorCodes</type>
        <count>1</count>
      </param>
    </function>
    <function name="CreateProgramWithBinary" extension="Core">
      <param name="errcode_ret">
        <type>ErrorCodes</type>
        <count>1</count>
      </param>
    </function>
    <function name="CreateProgramWithSource" extension="Core">
      <param name="errcode_ret">
        <type>ErrorCodes</type>
        <count>1</count>
      </param>
    </function>
  </replace>

  <classes name="cl">
    <add name="ComputeContextHandle">
      <function name="CreateBuffer" />
      <function name="CreateCommandQueue" />
      <function name="CreateImage" />
      <function name="CreateImage2D" />
      <function name="CreateImage3D" />
      <function name="CreateProgramWithBinary" />
      <function name="CreateProgramWithBuiltInKernels" />
      <function name="CreateProgramWithSource" />
      <function name="CreateSampler" />
      <function name="CreateUserEvent" />
      <function name="RetainContext" />
      <function name="ReleaseContext" />
      <function name="GetContextInfo" />
      <function name="GetDeviceInfo" />
      <function name="GetSupportedImageFormats" />
      <function name="LinkProgram" />
      <function name="SetMemObjectDestructorCallback" />
      <function name="CreateCommandQueueWithProperties" version="2.0" />
      <function name="CreatePipe" version="2.0" />
      <function name="SVMAlloc" version="2.0" />
      <function name="SVMFree" version="2.0" />
      <function name="CreateSamplerWithProperties" version="2.0" />
    </add>
    <add name="ComputeProgram">
      <function name="BuildProgram" />
      <function name="CreateKernel" />
    </add>
    <add name="ComputeKernel">
      <function name="GetKernelInfo" />
      <function name="GetKernelWorkGroupInfo" />
      <function name="ReleaseKernel" />
      <function name="RetainKernel" />
      <function name="SetKernelArg" />
    </add>
  </classes>

</signatures>